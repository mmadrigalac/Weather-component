!function c(i,a,u){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};i[t][0].call(o.exports,function(e){return s(i[t][1][e]||e)},o,o.exports,c,i,a,u)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(require,module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,r=n.eval,o=n.execScript;!r&&o&&(o.call(n,"null"),r=n.eval),forEach(Object_keys(t),function(e){n[e]=t[e]}),forEach(globals,function(e){t[e]&&(n[e]=t[e])});var c=Object_keys(n),i=r.call(n,this.code);return forEach(Object_keys(n),function(e){(e in t||-1===indexOf(c,e))&&(t[e]=n[e])}),forEach(globals,function(e){e in t||defineProp(t,e,n[e])}),document.body.removeChild(e),i},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var n=Script.createContext(t),e=this.runInContext(n);return t&&forEach(Object_keys(n),function(e){t[e]=n[e]}),e},forEach(Object_keys(Script.prototype),function(n){exports[n]=Script[n]=function(e){var t=Script(e);return t[n].apply(t,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(t){var n=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(e){n[e]=t[e]}),n}},{}],2:[function(e,t,n){"use strict";var c=function(e){if(e&&e.__esModule)return e;var t=a();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}}n.default=e,t&&t.set(e,n);return n}(e("../services/weatherService")),i=e("../models/weatherDataModel.js");e("vm");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){var n="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return l(e,arguments,p(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),f(t,e)})(e)}function l(e,t,n){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&f(o,n.prototype),o}).apply(null,arguments)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=document.currentScript.ownerDocument,h=function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,p(t).call(this))).attachShadow({mode:"open"}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,s(HTMLElement)),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(t,[{key:"connectedCallback",value:function(){var e=this.shadowRoot,t=d.querySelector("#weather-component-template").content.cloneNode(!0);e.appendChild(t),this.initLocationData(),this.addListeners()}},{key:"initLocationData",value:function(){var n=this,e=this.getAttribute("location")?this.getAttribute("location"):"Sapporo";c.getLocationOptions(e).then(function(e){var t=e.shift();c.getWeatherData(t.woeid).then(function(e){n.render((0,i.weatherDataModel)(e))})}).catch(function(e){console.error(e)})}},{key:"render",value:function(e){var t=e.currentData;this.shadowRoot.querySelector(".location-name").innerHTML=e.title,this.shadowRoot.querySelector(".temp").innerHTML="".concat(t.the_temp.toFixed(),"Â°"),this.shadowRoot.querySelector(".humidity").innerHTML="".concat(t.humidity,"%"),this.shadowRoot.querySelector(".wind").innerHTML="".concat(t.wind_speed.toFixed(1)," mps"),this.shadowRoot.querySelector(".direction").innerHTML="".concat(t.wind_direction_compass),this.getWeatherStateImage(e)}},{key:"getWeatherStateImage",value:function(e){var t=e.currentData.weather_state_abbr,n=document.createElement("img");n.src=c.getStateImageURL(t),this.shadowRoot.querySelector(".weather-container").style.backgroundImage="url(static/".concat(t,".png)"),this.shadowRoot.querySelector(".state").innerHTML="",this.shadowRoot.querySelector(".state").appendChild(n)}},{key:"addListeners",value:function(){var n=this;this.shadowRoot.querySelector("#select-location").addEventListener("click",function(e){n.shadowRoot.querySelector("#weather-location").style.display="block"}),this.shadowRoot.querySelector(".close").addEventListener("click",function(e){cleanLocationSelector(n)}),this.shadowRoot.querySelector("#searchButton").addEventListener("click",function(e){var t=n.shadowRoot.querySelector("#searchCriteria").value;n.generateLocationList(t)})}},{key:"cleanLocationSelector",value:function(){this.shadowRoot.querySelector("#weather-location").style.display="none",this.shadowRoot.querySelector(".location-results").innerHTML="",this.shadowRoot.querySelector("#searchCriteria").value=""}},{key:"generateLocationList",value:function(e){var o=this;c.getLocationOptions(e).then(function(e){function r(e,t){var n=document.createTextNode(t);e.appendChild(n)}if(o.shadowRoot.querySelector(".location-results").innerHTML="",!e.length){var t=document.createElement("span");return r(t,"Location was not found"),t.classList.add("missing-location"),void o.shadowRoot.querySelector(".location-results").appendChild(t)}e.forEach(function(e){var t=document.createElement("a"),n=document.createElement("span");r(n,e.title),t.setAttribute("href","#"),t.setAttribute("role","button"),t.setAttribute("woeid",e.woeid),t.classList.add("location-result"),t.append(n),t.addEventListener("click",function(e){var t=e.currentTarget.attributes.woeid.nodeValue;c.getWeatherData(t).then(function(e){o.render((0,i.weatherDataModel)(e))}),o.cleanLocationSelector()}),o.shadowRoot.querySelector(".location-results").appendChild(t)})})}}]),t}();customElements.define("weather-component",h)},{"../models/weatherDataModel.js":3,"../services/weatherService":5,vm:1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.weatherDataModel=function(e){var t=e.woeid,n=e.parent.title,r=e.title,o=e.consolidated_weather;return{parentTitle:n,title:r,currentData:o.shift(),consolidatedWeather:o,woeid:t,completeTitle:"".concat(r,", ").concat(n)}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getApiResponse=function(o){return new Promise(function(e,t){var n=new XMLHttpRequest;n.onload=function(){e(JSON.parse(n.responseText))};var r="".concat(c,"/").concat(o);n.open("GET",r,!0),n.setRequestHeader("Content-Type","application/json"),n.send()})},n.SITE_URL=void 0;var c="https://www.metaweather.com";n.SITE_URL=c},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getLocationOptions=function(e){var t=function(e){return/^\d+\.?\d*?\,-?\d+\.?\d*/i.test(e)}(e)?"lattlong=".concat(e):"query=".concat(e),n="api/location/search/?".concat(t);return r.getApiResponse(n)},n.getWeatherData=function(e){var t="api/location/".concat(e);return r.getApiResponse(t)},n.getStateImageURL=function(e){var t="".concat(r.SITE_URL,"/static/img/weather/png/64/");return"".concat(t).concat(e,".png")};var r=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}}n.default=e,t&&t.set(e,n);return n}(e("./weatherRepo.js"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}},{"./weatherRepo.js":4}]},{},[2,3,4,5]);
//# sourceMappingURL=main.map